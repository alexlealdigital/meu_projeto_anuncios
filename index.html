<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAZMXBbStSpVC0cY3iZpWSgNnThXHjDRNE",
            authDomain: "adslzweb.firebaseapp.com",
            projectId: "adslzweb",
            storageBucket: "adslzweb.firebasestorage.app",
            messagingSenderId: "728846463963",
            appId: "1:728846463963:web:ef72c03c782a36758d6dfe"
    };

    // Inicializa o Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // üî• Fun√ß√£o para buscar todos os an√∫ncios
    async function carregarAnuncios() {
        const container = document.getElementById("ad-container");
        container.innerHTML = "<p>Carregando an√∫ncios...</p>";

        try {
            const querySnapshot = await getDocs(collection(db, "anuncios_v2"));
            container.innerHTML = ""; // Limpa o loading

            if (querySnapshot.empty) {
                container.innerHTML = "<p>Nenhum an√∫ncio dispon√≠vel.</p>";
                return;
            }

            querySnapshot.forEach((doc) => {
                const data = doc.data();
                console.log("An√∫ncio carregado:", data);

                const ad = document.createElement("div");
                ad.classList.add("ad-card");

                ad.innerHTML = `
                    <h2>${data.titulo}</h2>
                    <p>${data.descricao}</p>
                    <img src="${data.imagem}" alt="An√∫ncio">
                    <a href="${data.link}" target="_blank">Ver mais</a>
                `;
                container.appendChild(ad);
            });

        } catch (error) {
            container.innerHTML = `<p>Erro ao carregar an√∫ncios: ${error.message}</p>`;
            console.error("Erro ao carregar an√∫ncios:", error);
        }
    }

    // Chama a fun√ß√£o ao carregar a p√°gina
    carregarAnuncios();
</script>
